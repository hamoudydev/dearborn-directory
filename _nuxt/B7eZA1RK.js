import{ac as m,y as v,I as L,d as h,c as d,i as l,g as u,F as y,ab as f,n as b,A as F,f as C,D as N,U as n,t as _,r as K,o as j,ad as q,V as z,R as V,e as $,ae as G,af as M,ag as O}from"./DT9msYUP.js";import{u as P}from"./CJNz9Grc.js";import{q as R}from"./hs7iW6aP.js";import{f as W}from"./BFDxGfwR.js";function I(){const a=m("tags",()=>[]),s=v().directory.tags,o=L(()=>s?s.filter(r=>r&&!a.value.includes(r.name)):[]);function i(r){const t=a.value.indexOf(r);t>-1&&a.value.splice(t,1)}function e(r){const t=r.target,p=t.value;g(p),t.value=""}function g(r){a.value&&!a.value.includes(r)&&a.value.push(r)}function c(r){const t=a.value.indexOf(r);if(t!=-1)return a.value.splice(t,1);a.value.push(r)}return{selectedTags:a,availableTags:o,addTagWithEvent:e,toggleTagByName:c,removeTag:i}}const H={class:"flex m-0 gap-4 mt-4 py-2"},J=["onClick"],Q=["value"],X=h({__name:"Select",setup(a){const{selectedTags:s,availableTags:o,addTagWithEvent:i,removeTag:e}=I();return(g,c)=>{const r=N;return l(),d("div",H,[(l(!0),d(y,null,f(n(s),t=>(l(),d("div",{class:b(["relative group border-2 shadow-sm font-semibold text-blue-500 bg-blue-600/10 rounded-lg px-1.5 py-1 inline-flex items-center justify-center","border-blue-500"])},[u("span",{onClick:()=>n(e)(t),class:"absolute text-gray-500 opacity-0 transition-all group-hover:opacity-100 hover:bg-gray-100 flex items-center justify-center -top-4 left-0 bg-white rounded-full h-6 w-6 border dark:bg-gray-700 dark:border-gray-600 dark:hover:bg-gray-800"},[C(r,{name:"tabler:x"})],8,J),F(" "+_(t),1)]))),256)),u("select",{modelValue:null,onChange:c[0]||(c[0]=(...t)=>n(i)&&n(i)(...t)),class:"border border-dashed border-gray-300 rounded-lg font-medium text-gray-500 dark:border-gray-500 dark:bg-gray-700 dark:text-gray-400 focus:ring-primary-500 focus:ring-2 focus:border-none ring-offset-4"},[c[1]||(c[1]=u("option",{value:"",disabled:"",selected:""}," Category ",-1)),(l(!0),d(y,null,f(n(o),t=>(l(),d("option",{key:t.name,value:t.name},_(t.name),9,Q))),128))],32)])}}}),Y={class:"flex flex-wrap gap-2 mt-4"},Z=["onClick"],ee=h({__name:"Grid",setup(a){const s=v().directory.tags,{selectedTags:o,toggleTagByName:i}=I();return(e,g)=>(l(),d("div",Y,[(l(!0),d(y,null,f(n(s),c=>(l(),d("span",{class:b(["border rounded-md px-2 py-1 hover:bg-gray-50 dark:hover:bg-gray-900 dark:border-gray-600 cursor-pointer select-none",n(o).includes(c.name)?"border-primary-500 dark:border-primary-300":""]),onClick:r=>n(i)(c.name)},_(c.name),11,Z))),256))]))}});function te(){const a=K(),s=function(o){o.key==="k"&&(o.ctrlKey||o.metaKey)&&(o.preventDefault(),a.value.focus())};return j(()=>{document.body.addEventListener("keydown",s)}),q(()=>{document.body.removeEventListener("keydown",s)}),a}const re={class:"mb-10 not-prose"},ae={class:"mt-2 flex rounded-md shadow-sm"},ne={class:"relative flex flex-grow items-stretch focus-within:z-10"},se={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},oe=["placeholder"],ue=h({__name:"Search",async setup(a){let s,o;const i=m("search");m("tags",()=>[]);const e=v().directory.search,g=([s,o]=z(()=>c()),s=await s,o(),s);async function c(){if(e!=null&&e.placeholder&&e.placeholder.includes("{0}")){const{data:t}=await P("content-count",()=>R("directory").count());return W((e==null?void 0:e.placeholder)??"Search {0} businesses",t.value)}return(e==null?void 0:e.placeholder)??"Search"}const r=te();return(t,p)=>{var x,k,w,T,S,B;const D=N,E=X,U=ee;return l(),d("div",re,[u("div",ae,[u("div",ne,[(x=n(e))!=null&&x.icon?(l(),d("div",se,[C(D,{name:n(e).icon,class:"h-5 w-5 text-gray-400","aria-hidden":"true"},null,8,["name"])])):$("",!0),G(u("input",{ref_key:"searchInput",ref:r,"onUpdate:modelValue":p[0]||(p[0]=A=>O(i)?i.value=A:null),class:b(["block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-600 focus:ring-2 focus:ring-inset focus:ring-primary-600 sm:text-sm sm:leading-6 dark:active:ring-primary-400 dark:bg-gray-700 dark:ring-gray-600 dark:text-gray-50 dark:placeholder:text-gray-50",(k=n(e))!=null&&k.icon?"pl-10":""]),placeholder:n(g)},null,10,oe),[[M,n(i)]])])]),((T=(w=n(e))==null?void 0:w.tags)==null?void 0:T.display)==="select"?(l(),V(E,{key:0})):((B=(S=n(e))==null?void 0:S.tags)==null?void 0:B.display)==="show-all"?(l(),V(U,{key:1})):$("",!0)])}}});export{ue as default};
