import{ac as f,y as v,I as L,d as h,c as u,i as l,g as d,F as g,ab as _,n as x,A as F,f as C,D as N,U as o,t as y,r as K,o as j,ad as q,V as z,R as V,e as $,ae as G,af as M,ag as O}from"./fda7F3DH.js";import{u as P}from"./DQdF4z8d.js";import{q as R}from"./Cg9LDOIs.js";import{f as W}from"./BFDxGfwR.js";function I(){const s=f("tags",()=>[]),a=v().directory.tags,r=L(()=>a?a.filter(n=>n&&!s.value.includes(n.name)):[]);function i(n){const t=s.value.indexOf(n);t>-1&&s.value.splice(t,1)}function e(n){const t=n.target,m=t.value;p(m),t.value=""}function p(n){s.value&&!s.value.includes(n)&&s.value.push(n)}function c(n){const t=s.value.indexOf(n);if(t!=-1)return s.value.splice(t,1);s.value.push(n)}return{selectedTags:s,availableTags:r,addTagWithEvent:e,toggleTagByName:c,removeTag:i}}const H={class:"flex m-0 gap-4 mt-4 py-2"},J=["onClick"],Q=["value"],X=h({__name:"Select",setup(s){const{selectedTags:a,availableTags:r,addTagWithEvent:i,removeTag:e}=I();return(p,c)=>{const n=N;return l(),u("div",H,[(l(!0),u(g,null,_(o(a),t=>(l(),u("div",{class:x(["relative group border-2 shadow-sm font-semibold text-blue-500 bg-blue-600/10 rounded-lg px-1.5 py-1 inline-flex items-center justify-center","border-blue-500"])},[d("span",{onClick:()=>o(e)(t),class:"absolute text-gray-500 opacity-0 transition-all group-hover:opacity-100 hover:bg-gray-100 flex items-center justify-center -top-4 left-0 bg-white rounded-full h-6 w-6 border"},[C(n,{name:"tabler:x"})],8,J),F(" "+y(t),1)]))),256)),d("select",{modelValue:null,onChange:c[0]||(c[0]=(...t)=>o(i)&&o(i)(...t)),class:"border border-dashed border-gray-300 rounded-lg font-medium text-gray-500 focus:ring-primary-500 focus:ring-2 focus:border-none ring-offset-4"},[c[1]||(c[1]=d("option",{value:"",disabled:"",selected:""}," Category ",-1)),(l(!0),u(g,null,_(o(r),t=>(l(),u("option",{key:t.name,value:t.name},y(t.name),9,Q))),128))],32)])}}}),Y={class:"flex flex-wrap gap-2 mt-4"},Z=["onClick"],ee=h({__name:"Grid",setup(s){const a=v().directory.tags,{selectedTags:r,toggleTagByName:i}=I();return(e,p)=>(l(),u("div",Y,[(l(!0),u(g,null,_(o(a),c=>(l(),u("span",{class:x(["border rounded-md px-2 py-1 hover:bg-gray-50 cursor-pointer select-none",o(r).includes(c.name)?"border-primary-500":""]),onClick:n=>o(i)(c.name)},y(c.name),11,Z))),256))]))}});function te(){const s=K(),a=function(r){r.key==="k"&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),s.value.focus())};return j(()=>{document.body.addEventListener("keydown",a)}),q(()=>{document.body.removeEventListener("keydown",a)}),s}const ne={class:"mb-10 not-prose"},se={class:"mt-2 flex rounded-md shadow-sm"},oe={class:"relative flex flex-grow items-stretch focus-within:z-10"},ae={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},re=["placeholder"],de=h({__name:"Search",async setup(s){let a,r;const i=f("search");f("tags",()=>[]);const e=v().directory.search,p=([a,r]=z(()=>c()),a=await a,r(),a);async function c(){if(e!=null&&e.placeholder&&e.placeholder.includes("{0}")){const{data:t}=await P("content-count",()=>R("directory").count());return W((e==null?void 0:e.placeholder)??"Search {0} businesses",t.value)}return(e==null?void 0:e.placeholder)??"Search"}const n=te();return(t,m)=>{var b,k,w,T,S,B;const D=N,E=X,U=ee;return l(),u("div",ne,[d("div",se,[d("div",oe,[(b=o(e))!=null&&b.icon?(l(),u("div",ae,[C(D,{name:o(e).icon,class:"h-5 w-5 text-gray-400","aria-hidden":"true"},null,8,["name"])])):$("",!0),G(d("input",{ref_key:"searchInput",ref:n,"onUpdate:modelValue":m[0]||(m[0]=A=>O(i)?i.value=A:null),class:x(["block w-full rounded-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-600 focus:ring-2 focus:ring-inset focus:ring-primary-600 sm:text-sm sm:leading-6",(k=o(e))!=null&&k.icon?"pl-10":""]),placeholder:o(p)},null,10,re),[[M,o(i)]])])]),((T=(w=o(e))==null?void 0:w.tags)==null?void 0:T.display)==="select"?(l(),V(E,{key:0})):((B=(S=o(e))==null?void 0:S.tags)==null?void 0:B.display)==="show-all"?(l(),V(U,{key:1})):$("",!0)])}}});export{de as default};
